{
  "info": {
    "name": "Shipcrowd Xpressbees",
    "description": "Comprehensive collection for testing Xpressbees API integration with Shipcrowd. This collection includes endpoints for authentication, shipment creation, tracking, cancellation, and serviceability checks.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "item": [
    {
      "name": "1. Authentication",
      "item": [
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"{{xpressbeesEmail}}\",\n    \"password\": \"{{xpressbeesPassword}}\"\n}"
            },
            "url": {
              "raw": "{{xpressbeesBaseUrl}}/users/login",
              "host": [
                "{{xpressbeesBaseUrl}}"
              ],
              "path": [
                "users",
                "login"
              ]
            },
            "description": "Authenticate with Xpressbees API and obtain access token."
          },
          "response": []
        }
      ],
      "description": "Authentication endpoints for Xpressbees API"
    },
    {
      "name": "2. Shipment Management",
      "item": [
        {
          "name": "Create Shipment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{xpressbeesToken}}",
                "description": "Xpressbees access token"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"order_number\": \"{{orderId}}\",\n    \"shipping_charges\": {{shippingCharges}},\n    \"discount\": {{discount}},\n    \"cod_charges\": {{codCharges}},\n    \"payment_type\": \"{{paymentType}}\",\n    \"order_amount\": {{orderAmount}},\n    \"package_weight\": {{packageWeight}},\n    \"package_length\": {{packageLength}},\n    \"package_breadth\": {{packageBreadth}},\n    \"package_height\": {{packageHeight}},\n    \"request_auto_pickup\": \"{{requestAutoPickup}}\",\n    \"consignee\": {\n        \"name\": \"{{customerName}}\",\n        \"address\": \"{{billingAddress}}\",\n        \"address_2\": \"\",\n        \"city\": \"{{billingCity}}\",\n        \"state\": \"{{billingState}}\",\n        \"pincode\": \"{{billingPincode}}\",\n        \"phone\": \"{{customerPhone}}\",\n        \"email\": \"{{customerEmail}}\"\n    },\n    \"pickup\": {\n        \"warehouse_name\": \"{{warehouseName}}\",\n        \"name\": \"{{senderName}}\",\n        \"address\": \"{{senderAddressLine1}}\",\n        \"address_2\": \"{{senderAddressLine2}}\",\n        \"city\": \"{{senderCity}}\",\n        \"state\": \"{{senderState}}\",\n        \"pincode\": \"{{senderPincode}}\",\n        \"phone\": \"{{senderPhone}}\",\n        \"email\": \"{{senderEmail}}\"\n    },\n    \"order_items\": [\n        {\n            \"name\": \"{{productName}}\",\n            \"sku\": \"{{productSku}}\",\n            \"units\": {{productQuantity}},\n            \"selling_price\": {{productPrice}},\n            \"discount\": {{productDiscount}},\n            \"tax\": {{productTax}},\n            \"hsn\": \"{{productHsn}}\"\n        }\n    ],\n    \"courier_id\": \"{{courierId}}\",\n    \"collectable_amount\": {{collectableAmount}}\n}"
            },
            "url": {
              "raw": "{{xpressbeesBaseUrl}}/shipments2",
              "host": [
                "{{xpressbeesBaseUrl}}"
              ],
              "path": [
                "shipments2"
              ]
            },
            "description": "Create a new shipment in Xpressbees"
          },
          "response": []
        },
        {
          "name": "Track Shipment",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{xpressbeesToken}}",
                "description": "Xpressbees access token"
              }
            ],
            "url": {
              "raw": "{{xpressbeesBaseUrl}}/shipments2/track/{{awbNumber}}",
              "host": [
                "{{xpressbeesBaseUrl}}"
              ],
              "path": [
                "shipments2",
                "track",
                "{{awbNumber}}"
              ]
            },
            "description": "Track a shipment using AWB number"
          },
          "response": []
        },
        {
          "name": "Cancel Shipment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{xpressbeesToken}}",
                "description": "Xpressbees access token"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"awb\": \"{{awbNumber}}\"\n}"
            },
            "url": {
              "raw": "{{xpressbeesBaseUrl}}/shipments2/cancel",
              "host": [
                "{{xpressbeesBaseUrl}}"
              ],
              "path": [
                "shipments2",
                "cancel"
              ]
            },
            "description": "Cancel a shipment using AWB number"
          },
          "response": []
        }
      ],
      "description": "Endpoints for shipment management in Xpressbees"
    },
    {
      "name": "3. Serviceability",
      "item": [
        {
          "name": "Check Serviceability",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{xpressbeesToken}}",
                "description": "Xpressbees access token"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"origin\": \"{{pickupPincode}}\",\n    \"destination\": \"{{deliveryPincode}}\",\n    \"payment_type\": \"{{paymentType}}\",\n    \"order_amount\": {{shipmentValue}},\n    \"weight\": {{packageWeight}},\n    \"length\": {{packageLength}},\n    \"breadth\": {{packageBreadth}},\n    \"height\": {{packageHeight}}\n}"
            },
            "url": {
              "raw": "{{xpressbeesBaseUrl}}/courier/serviceability",
              "host": [
                "{{xpressbeesBaseUrl}}"
              ],
              "path": [
                "courier",
                "serviceability"
              ]
            },
            "description": "Check serviceability between two pincodes"
          },
          "response": []
        },
        {
          "name": "Get Courier List",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{xpressbeesToken}}",
                "description": "Xpressbees access token"
              }
            ],
            "url": {
              "raw": "{{xpressbeesBaseUrl}}/courier",
              "host": [
                "{{xpressbeesBaseUrl}}"
              ],
              "path": [
                "courier"
              ]
            },
            "description": "Get list of available couriers"
          },
          "response": []
        }
      ],
      "description": "Endpoints for checking serviceability in Xpressbees"
    },
    {
      "name": "4. NDR Management",
      "item": [
        {
          "name": "Get NDR List",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{xpressbeesToken}}",
                "description": "Xpressbees access token"
              }
            ],
            "url": {
              "raw": "{{xpressbeesBaseUrl}}/ndr",
              "host": [
                "{{xpressbeesBaseUrl}}"
              ],
              "path": [
                "ndr"
              ]
            },
            "description": "Get list of NDR (Non-Delivery Report) shipments"
          },
          "response": []
        },
        {
          "name": "Create NDR Action",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{xpressbeesToken}}",
                "description": "Xpressbees access token"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"awb\": \"{{awbNumber}}\",\n    \"action\": \"{{ndrAction}}\",\n    \"action_data\": {{ndrActionData}}\n}"
            },
            "url": {
              "raw": "{{xpressbeesBaseUrl}}/ndr/action",
              "host": [
                "{{xpressbeesBaseUrl}}"
              ],
              "path": [
                "ndr",
                "action"
              ]
            },
            "description": "Create an action for NDR shipment"
          },
          "response": []
        }
      ],
      "description": "Endpoints for NDR management in Xpressbees"
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Set default values for Xpressbees API testing",
          "if (!pm.environment.get('xpressbeesEmail')) {",
          "    pm.environment.set('xpressbeesEmail', 'your-xpressbees-email@example.com');",
          "}",
          "if (!pm.environment.get('xpressbeesPassword')) {",
          "    pm.environment.set('xpressbeesPassword', 'your-xpressbees-password');",
          "}",
          "if (!pm.environment.get('orderId')) {",
          "    pm.environment.set('orderId', 'TEST-' + Date.now());",
          "}",
          "if (!pm.environment.get('shippingCharges')) {",
          "    pm.environment.set('shippingCharges', 0);",
          "}",
          "if (!pm.environment.get('discount')) {",
          "    pm.environment.set('discount', 0);",
          "}",
          "if (!pm.environment.get('codCharges')) {",
          "    pm.environment.set('codCharges', 0);",
          "}",
          "if (!pm.environment.get('paymentType')) {",
          "    pm.environment.set('paymentType', 'prepaid');",
          "}",
          "if (!pm.environment.get('orderAmount')) {",
          "    pm.environment.set('orderAmount', 999);",
          "}",
          "if (!pm.environment.get('requestAutoPickup')) {",
          "    pm.environment.set('requestAutoPickup', 'yes');",
          "}",
          "if (!pm.environment.get('warehouseName')) {",
          "    pm.environment.set('warehouseName', 'Test Warehouse');",
          "}",
          "if (!pm.environment.get('senderEmail')) {",
          "    pm.environment.set('senderEmail', 'sender@example.com');",
          "}",
          "if (!pm.environment.get('productDiscount')) {",
          "    pm.environment.set('productDiscount', 0);",
          "}",
          "if (!pm.environment.get('productTax')) {",
          "    pm.environment.set('productTax', 0);",
          "}",
          "if (!pm.environment.get('productHsn')) {",
          "    pm.environment.set('productHsn', '');",
          "}",
          "if (!pm.environment.get('collectableAmount')) {",
          "    pm.environment.set('collectableAmount', 0);",
          "}",
          "if (!pm.environment.get('ndrAction')) {",
          "    pm.environment.set('ndrAction', 'reschedule');",
          "}",
          "if (!pm.environment.get('ndrActionData')) {",
          "    pm.environment.set('ndrActionData', {});",
          "}"
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "xpressbeesToken",
      "value": "",
      "type": "string",
      "description": "Xpressbees API access token"
    },
    {
      "key": "awbNumber",
      "value": "",
      "type": "string",
      "description": "AWB number for tracking shipment"
    },
    {
      "key": "courierId",
      "value": "",
      "type": "string",
      "description": "ID of the courier service to use for shipment"
    }
  ]
}